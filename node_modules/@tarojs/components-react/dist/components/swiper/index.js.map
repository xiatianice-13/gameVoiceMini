{"version":3,"file":"index.js","sources":["../../../src/components/swiper/index.tsx"],"sourcesContent":["import 'swiper/swiper-bundle.css'\nimport './style/index.css'\n\nimport classNames from 'classnames'\nimport React from 'react'\nimport Swipers from 'swiper/bundle'\n\nimport { createForwardRefComponent, debounce } from '../../utils'\n\nimport type ISwiper from 'swiper'\n\nlet INSTANCE_ID = 0\nconst ONE_ADDITIONAL_SLIDES_THRESHOLD = 5\nconst TWO_ADDITIONAL_SLIDES_THRESHOLD = 7\n\ninterface SwiperItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  itemId: string\n  forwardedRef?: React.MutableRefObject<HTMLDivElement>\n}\n\ninterface SwiperProps extends React.HTMLAttributes<HTMLDivElement> {\n  autoplay?: boolean\n  interval?: number\n  duration?: number\n  current?: number\n  displayMultipleItems?: number\n  circular?: boolean\n  vertical?: boolean\n  spaceBetween?: any\n  previousMargin?: string\n  nextMargin?: string\n  indicatorColor?: string\n  indicatorActiveColor?: string\n  indicatorDots?: boolean\n  currentItemId?: string\n  forwardedRef?: React.MutableRefObject<HTMLDivElement>\n  full?: boolean\n  onAnimationFinish?: (e: TouchEvent) => void\n  effectsProps?: Record<string, any>\n}\n\nconst createEvent = (type: string) => {\n  let e\n  try {\n    e = new TouchEvent(type)\n  } catch (err) {\n    e = document.createEvent('Event')\n    e.initEvent(type, true, true)\n  }\n  return e\n}\n\nclass SwiperItemInner extends React.Component<SwiperItemProps, Record<string, unknown>> {\n  render () {\n    const { className, style, itemId, children, forwardedRef, ...restProps } = this.props\n    const cls = classNames('swiper-slide', className)\n    return (\n      <div\n        ref={(e) => {\n          if (e && forwardedRef) {\n            forwardedRef.current = e\n          }\n        }}\n        className={cls}\n        style={style}\n        item-id={itemId}\n        {...restProps}\n      >\n        {children}\n      </div>\n    )\n  }\n}\n\ninterface SwiperState {\n  swiperWrapper: HTMLElement | null\n}\n\nclass SwiperInner extends React.Component<SwiperProps, SwiperState> {\n  _id = 1 + INSTANCE_ID++\n  #source = 'autoplay'\n  #swiperResetting: boolean = false\n  #lastSwiperActiveIndex: number = 0\n  // dom 变化是否由外部引起，因为 swiper 的循环模式也会引起 dom 的变化。如果不是由外部引起的 dom 变化，就不需要重新初始化 swiper\n  #domChangeByOutSide: boolean = false\n  $el: HTMLDivElement | null\n  swiper: ISwiper| null\n  observer: MutationObserver\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      swiperWrapper: null\n    }\n  }\n\n  componentDidMount () {\n    this.handleInit()\n  }\n\n  hackSwiperWrapDomAction () {\n    if (!this.state.swiperWrapper || !this.swiper) return\n    const appendChild = this.state.swiperWrapper.appendChild.bind(this.state.swiperWrapper)\n    const removeChild = this.state.swiperWrapper.removeChild.bind(this.state.swiperWrapper)\n    const replaceChild = this.state.swiperWrapper.replaceChild.bind(this.state.swiperWrapper)\n    const insertBefore = this.state.swiperWrapper.insertBefore.bind(this.state.swiperWrapper)\n\n    const beforeAction = () => {\n      if (!this.state.swiperWrapper || !this.swiper) return\n      this.#swiperResetting = true\n      if (!this.#domChangeByOutSide && this.props.circular) {\n        // 如果是由于外部子节点的变化引起的 dom 变化，需要重新初始化 swiper。\n        // 在初dom操作之前，需要调用 loopDestroy，把子节点的顺序恢复\n        this.#domChangeByOutSide = true\n        this.swiper.loopDestroy()\n        this.swiper.params.loop = false\n      }\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.appendChild = (...args) => {\n      beforeAction()\n      return appendChild(...args)\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.removeChild = (...args) => {\n      beforeAction()\n      return removeChild(...args)\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.replaceChild = (...args) => {\n      beforeAction()\n      return replaceChild(...args)\n    }\n\n    // eslint-disable-next-line react/no-direct-mutation-state\n    this.state.swiperWrapper.insertBefore = (...args) => {\n      beforeAction()\n      return insertBefore(...args)\n    }\n  }\n\n  handleInit = (reset = false) => {\n    const {\n      autoplay = false,\n      circular = true,\n      current = 0,\n      displayMultipleItems = 1,\n      duration = 500,\n      interval = 5000,\n      currentItemId,\n      effectsProps = {},\n      vertical\n    } = this.props\n\n    let initialSlide = parseInt(String(current), 10)\n    if (reset) {\n      initialSlide = this.#lastSwiperActiveIndex\n    } else {\n      if (currentItemId) {\n        let itemIdIndex = 0\n        this.getSlidersList().forEach((swiperItem, index) => {\n          // @ts-ignore\n          if (swiperItem.itemId && swiperItem.itemId === currentItemId) {\n            itemIdIndex = index\n          }\n        })\n        initialSlide = itemIdIndex\n      }\n    }\n\n    const loopAdditionalSlides = this.getLoopAdditionalSlides()\n    const centeredSlides = parseFloat(String(displayMultipleItems)) === 1\n    const slidesPerView = parseFloat(String(displayMultipleItems)) === 1 ? 'auto' : displayMultipleItems\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this\n    const opt: Record<string, any> = {\n      // 指示器\n      pagination: { el: `.taro-swiper-${this._id} > .swiper-container > .swiper-pagination` },\n      direction: vertical ? 'vertical' : 'horizontal',\n      loop: circular,\n      slidesPerView: slidesPerView,\n      initialSlide,\n      speed: parseInt(String(duration), 10),\n      observer: true,\n      observeParents: true,\n      loopAdditionalSlides,\n      centeredSlides,\n      ...effectsProps,\n      on: {\n        init (_swiper) {\n          that.getNeedFixLoop() && _swiper.loopFix()\n          that.props.autoplay && _swiper.autoplay.start()\n        },\n        transitionEnd (_swiper) {\n          if (that.#swiperResetting || that.#lastSwiperActiveIndex === _swiper.realIndex) return\n          that.#lastSwiperActiveIndex = _swiper.realIndex\n          that.getNeedFixLoop() && _swiper.loopFix()\n          that.props.autoplay && _swiper.autoplay.start()\n          const e = createEvent('touchend')\n          try {\n            const currentId = that.getCurrentId(_swiper)\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                source: that.#source,\n                current: this.realIndex,\n                currentId: currentId\n              }\n            })\n          } catch (err) {} // eslint-disable-line no-empty\n          that.handleOnAnimationFinish(e)\n          that.#source = 'autoplay'\n        },\n        touchMove () {\n          that.#source = 'touch'\n        },\n        touchEnd: (_swiper) => {\n          that.#source = 'touch'\n          that.props.autoplay && _swiper.autoplay.start()\n        },\n        touchStart: (_swiper) => {\n          that.#source = 'touch'\n          that.props.autoplay && _swiper.autoplay.pause()\n        },\n        slideChange (_swiper) {\n          if (that.#swiperResetting || that.#lastSwiperActiveIndex === _swiper.realIndex) return\n          const e = createEvent('touchend')\n          try {\n            const currentId = that.getCurrentId(_swiper)\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                current: this.realIndex,\n                source: that.#source,\n                currentId,\n              }\n            })\n          } catch (err) {} // eslint-disable-line no-empty\n          that.handleOnChange(e)\n        },\n        autoplay (_swiper) {\n          // Note: 修复 autoplay 时，切换到其他页面再切回来，autoplay 会停止的问题\n          _swiper.animating = false\n          that.#source = 'autoplay'\n        }\n      }\n    }\n\n    // 自动播放\n    if (autoplay) {\n      opt.autoplay = {\n        delay: parseInt(String(interval), 10),\n        disableOnInteraction: false\n      }\n    }\n\n    this.swiper = new Swipers(this.$el!, opt)\n\n    // Note: 这里是拦截了 swiper 的 minTranslate 和 maxTranslate 方法，手动修复了 loop 模式下的 margin 问题\n    // 因为这两个属性会影响滑动到哪个位置进行 fixloop\n    // 可参考源码：https://github.com/nolimits4web/swiper/blob/v11.1.0/src/core/events/onTouchMove.mjs\n    // https://github.com/nolimits4web/swiper/blob/v11.1.0/src/core/loop/loopFix.mjs\n    if (this.getNeedFixLoop()) {\n      // @ts-ignore\n      const minTranslate = this.swiper.minTranslate.bind(this.swiper)\n      // @ts-ignore\n      const maxTranslate = this.swiper.maxTranslate.bind(this.swiper)\n      if (centeredSlides && this.getSlidersList().length < 4) {\n        // @ts-ignore\n        this.swiper.minTranslate = () => minTranslate() + this.parseMargin()[1]\n        // @ts-ignore\n        this.swiper.maxTranslate = () => maxTranslate() - this.parseMargin()[0]\n      } else {\n        // @ts-ignore\n        this.swiper.minTranslate = () => minTranslate() - this.parseMargin()[0]\n        // @ts-ignore\n        this.swiper.maxTranslate = () => maxTranslate() + this.parseMargin()[1]\n      }\n    }\n\n    this.setState({\n      swiperWrapper: this.swiper.wrapperEl\n    })\n  }\n\n  componentDidUpdate (prevProps, pervState) {\n    if (!this.swiper || !this.state.swiperWrapper) return\n    if (pervState.swiperWrapper !== this.state.swiperWrapper && this.state.swiperWrapper) {\n      this.observer && this.observer.disconnect()\n      this.observer = new MutationObserver(this.handleSwiperSizeDebounce)\n      this.observer.observe(this.state.swiperWrapper as Node, {\n        childList: true\n      })\n      this.hackSwiperWrapDomAction()\n    }\n\n    if (prevProps.circular !== this.props.circular || prevProps.displayMultipleItems !== this.props.displayMultipleItems) {\n      this.reset()\n    }\n\n    if (prevProps.interval !== this.props.interval) {\n      if (typeof this.swiper.params.autoplay === 'object') {\n        this.swiper.params.autoplay.delay = this.props.interval\n      }\n    }\n\n    if (prevProps.duration !== this.props.duration) {\n      this.swiper.params.speed = this.props.duration\n    }\n\n    if (prevProps.current !== this.props.current && !this.props.currentItemId) {\n      const n = parseInt(String(this.props.current), 10)\n      if (isNaN(n) || n === this.swiper.realIndex) return\n      this.#source = ''\n      if (this.props.circular) {\n        this.swiper.slideToLoop(n) // 更新下标\n        this.props.autoplay && this.swiper.autoplay.pause()\n        // @ts-ignore\n        this.swiper.loopFix()\n        this.props.autoplay && this.swiper.autoplay.start()\n      } else {\n        this.swiper.slideTo(n) // 更新下标\n      }\n    }\n\n    if (prevProps.autoplay !== this.props.autoplay) {\n      const swiperAutoplay = this.swiper.autoplay\n      if (swiperAutoplay) {\n        if (swiperAutoplay.running === this.props.autoplay) return\n\n        if (this.props.autoplay) {\n          if (this.swiper.params && typeof this.swiper.params.autoplay === 'object') {\n            if (this.swiper.params.autoplay.disableOnInteraction === true) {\n              this.swiper.params.autoplay.disableOnInteraction = false\n            }\n            this.swiper.params.autoplay.delay = this.props.interval\n          }\n          swiperAutoplay.start()\n        } else {\n          swiperAutoplay.stop()\n        }\n      }\n    }\n\n    if (prevProps.currentItemId !== this.props.currentItemId) {\n      let itemIdIndex = 0\n      this.getSlidersList().forEach((swiperItem, index) => {\n        const itemId = swiperItem.getAttribute('item-id')\n        // @ts-ignore\n        if (itemId === this.props.currentItemId) {\n          if (this.props.circular) {\n            itemIdIndex = Number(swiperItem.getAttribute('data-swiper-slide-index'))\n          } else {\n            itemIdIndex = index\n          }\n        }\n      })\n      if (isNaN(itemIdIndex) || itemIdIndex === this.swiper.realIndex) return\n      this.#source = ''\n      if (this.props.circular) {\n        this.swiper.slideToLoop(itemIdIndex) // 更新下标\n        this.props.autoplay && this.swiper.autoplay.pause()\n        // @ts-ignore\n        this.swiper.loopFix()\n        this.props.autoplay && this.swiper.autoplay.start()\n      } else {\n        this.swiper.slideTo(itemIdIndex) // 更新下标\n      }\n    }\n  }\n\n  componentWillUnmount () {\n    this.$el = null\n    this.swiper?.destroy?.()\n    this.observer?.disconnect?.()\n    this.setState({\n      swiperWrapper: null\n    })\n  }\n\n  handleOnChange (e: React.FormEvent<HTMLDivElement>) {\n    const func = this.props.onChange\n    typeof func === 'function' && func(e)\n  }\n\n  handleOnAnimationFinish (e: TouchEvent) {\n    const func = this.props.onAnimationFinish\n    typeof func === 'function' && func(e)\n  }\n\n  handleSwiperSizeDebounce = debounce(() => {\n    if (!this.swiper) return\n    if (this.props.circular) {\n      if (this.#domChangeByOutSide) {\n        this.reset()\n        this.#domChangeByOutSide = false\n      }\n    } else {\n      this.swiper.update()\n      this.#swiperResetting = false\n    }\n  }, 50)\n\n\n  reset = () => {\n    if (!this.swiper) return\n    this.#swiperResetting = true\n    this.#lastSwiperActiveIndex = this.swiper.realIndex\n    this.swiper.destroy()\n    this.handleInit(true)\n    this.#swiperResetting = false\n  }\n\n  // 以下为方法函数\n  getSlidersList = () => this.$el?.querySelectorAll?.('.swiper-slide') || []\n\n  // 获取是否需要手动修复 loop 的条件\n  getNeedFixLoop = () => {\n    const margins = this.parseMargin()\n    const hasMargin = margins.filter(Boolean).length > 0\n    return this.props.circular && hasMargin\n  }\n\n  // Note: loop 的时候添加 additionalSlides 可以避免循环的时候由于 loopFix 不及时，出现空白的问题。但是并不是 additionalSlides 越多越好，因为 additionalSlides 越多，如果 swiper-item 的数量不够，会导致出现 bug。\n  // 目前的策略是 swiper-item 的数量小于等于 5 时，不添加 additionalSlides，大于 5 小于等于 7 时，添加 1 个 additionalSlides，大于 7 时，添加 2 个 additionalSlides。\n  getLoopAdditionalSlides():number {\n    const slidersLength = (this.getSlidersList()).length\n    if (!this.$el || !this.getNeedFixLoop() || slidersLength < ONE_ADDITIONAL_SLIDES_THRESHOLD) return 0\n    if (slidersLength <= TWO_ADDITIONAL_SLIDES_THRESHOLD) return 1\n    return 2\n  }\n\n  parseMargin = () => {\n    const { previousMargin = '0px', nextMargin = '0px' } = this.props\n    const [, pM] = /^(\\d+)px/.exec(previousMargin) || []\n    const [, nN] = /^(\\d+)px/.exec(nextMargin as string) || []\n    return [parseInt(pM) || 0, parseInt(nN) || 0]\n  }\n\n  getCurrentId (swiper: ISwiper) {\n    const slides = swiper.slides\n    const activeIndex = swiper.activeIndex\n    const currentSlide = slides[activeIndex]\n    return currentSlide.getAttribute('item-id')\n  }\n\n  render () {\n    const {\n      className,\n      style,\n      vertical,\n      indicatorColor,\n      indicatorActiveColor,\n      forwardedRef\n    } = this.props\n    const defaultIndicatorColor = indicatorColor || 'rgba(0, 0, 0, .3)'\n    const defaultIndicatorActiveColor = indicatorActiveColor || '#000'\n    const [pM, nM] = this.parseMargin()\n    const cls = classNames(`taro-swiper-${this._id}`, className)\n    const sty = Object.assign({}, style)\n    const hasMargin = pM || nM\n    if (hasMargin) {\n      sty.overflow = 'hidden'\n    }\n    if (this.props.full) {\n      sty.height = '100%'\n    }\n    const swiperContainerStyleList:string [] = [\n      'overflow: visible;',\n      vertical ? `margin-top: ${pM}px; margin-bottom: ${nM}px;` : `margin-right: ${nM}px; margin-left: ${pM}px;`,\n      this.props.full ? 'height: 100%;' : ''\n    ]\n\n\n    const swiperPaginationStyleList:string [] = [\n      this.props.indicatorDots ? 'opacity: 1;' : 'display: none;',\n      'font-size: 0;'\n    ]\n    return (\n      <div className={`swiper-container-wrapper ${cls}`} style={sty} ref={(e) => {\n        if (forwardedRef && e) {\n          forwardedRef.current = e\n        }\n      }}>\n        <div className='swiper-container' style={{ overflow: 'visible' }} ref={(el) => { this.$el = el }}>\n          <div\n            dangerouslySetInnerHTML={{\n              __html: `<style type='text/css'>\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet { background: ${defaultIndicatorColor} }\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet-active { background: ${defaultIndicatorActiveColor} }\n              .taro-swiper-${this._id} > .swiper-container { ${swiperContainerStyleList.join('')} }\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination { ${swiperPaginationStyleList.join('')} }\n              </style>`\n            }}\n          />\n          <div className='swiper-wrapper' >{this.props.children}</div>\n          <div className='swiper-pagination' />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport const Swiper = createForwardRefComponent(SwiperInner)\nexport const SwiperItem = createForwardRefComponent(SwiperItemInner)\n"],"names":["INSTANCE_ID","ONE_ADDITIONAL_SLIDES_THRESHOLD","TWO_ADDITIONAL_SLIDES_THRESHOLD","createEvent","type","e","TouchEvent","err","document","initEvent","SwiperItemInner","React","Component","render","_a","props","className","style","itemId","children","forwardedRef","restProps","__rest","cls","classNames","_jsx","ref","current","SwiperInner","constructor","_this","this","_id","_SwiperInner_source","set","_SwiperInner_swiperResetting","_SwiperInner_lastSwiperActiveIndex","_SwiperInner_domChangeByOutSide","handleInit","reset","arguments","length","undefined","autoplay","circular","displayMultipleItems","duration","interval","currentItemId","effectsProps","vertical","initialSlide","parseInt","String","__classPrivateFieldGet","itemIdIndex","getSlidersList","forEach","swiperItem","index","loopAdditionalSlides","getLoopAdditionalSlides","centeredSlides","parseFloat","slidesPerView","that","opt","Object","assign","pagination","el","direction","loop","speed","observer","observeParents","on","init","_swiper","getNeedFixLoop","loopFix","start","transitionEnd","realIndex","__classPrivateFieldSet","currentId","getCurrentId","defineProperty","enumerable","value","source","handleOnAnimationFinish","touchMove","touchEnd","touchStart","pause","slideChange","handleOnChange","animating","delay","disableOnInteraction","swiper","Swipers","$el","minTranslate","bind","maxTranslate","parseMargin","setState","swiperWrapper","wrapperEl","handleSwiperSizeDebounce","debounce","update","destroy","_b","querySelectorAll","margins","hasMargin","filter","Boolean","previousMargin","nextMargin","pM","exec","nN","state","componentDidMount","hackSwiperWrapDomAction","appendChild","removeChild","replaceChild","insertBefore","beforeAction","loopDestroy","params","componentDidUpdate","prevProps","pervState","disconnect","MutationObserver","observe","childList","n","isNaN","slideToLoop","slideTo","swiperAutoplay","running","stop","getAttribute","Number","componentWillUnmount","_d","_c","func","onChange","onAnimationFinish","slidersLength","slides","activeIndex","currentSlide","indicatorColor","indicatorActiveColor","defaultIndicatorColor","defaultIndicatorActiveColor","nM","sty","overflow","full","height","swiperContainerStyleList","swiperPaginationStyleList","indicatorDots","_jsxs","dangerouslySetInnerHTML","__html","join","Swiper","createForwardRefComponent","SwiperItem"],"mappings":"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"}